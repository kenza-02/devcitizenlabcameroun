---
import type { Headline } from "~/types";
import { twMerge } from "tailwind-merge";

const {
  title = await Astro.slots.render("title"),
  subtitle = await Astro.slots.render("subtitle"),
  tagline,
  classes = {},
} = Astro.props as Headline;

const {
  container: containerClass = "max-w-3xl",
  title: titleClass = "text-3xl md:text-4xl ",
  subtitle: subtitleClass = "text-xl text-center",
} = classes;
---

<style>
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }
  
  @keyframes glow {
    0%, 100% { box-shadow: 0 0 20px rgba(0, 135, 81, 0.3); }
    50% { box-shadow: 0 0 40px rgba(252, 209, 22, 0.4); }
  }
  
  .gradient-text {
    background: linear-gradient(135deg, #008751, #fcd116, #e8112d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: glow 3s ease-in-out infinite;
  }
  
  .floating-elements {
    animation: float 6s ease-in-out infinite;
  }
  
  .floating-elements:nth-child(2) {
    animation-delay: 2s;
  }
  
  .floating-elements:nth-child(3) {
    animation-delay: 4s;
  }
</style>

{
  (title || subtitle || tagline) && (
    <div
      class={twMerge("mb-8 md:mx-auto md:mb-12 text-center relative", containerClass)}
    >
      {/* Éléments décoratifs de fond */}
      <div class="absolute inset-0 -z-10">
        <div class="absolute top-10 left-1/4 w-32 h-32 bg-green-200 dark:bg-green-800 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-xl opacity-30 floating-elements"></div>
        <div class="absolute top-20 right-1/4 w-24 h-24 bg-yellow-200 dark:bg-yellow-800 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-xl opacity-30 floating-elements"></div>
        <div class="absolute bottom-10 left-1/3 w-28 h-28 bg-red-200 dark:bg-red-800 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-xl opacity-30 floating-elements"></div>
      </div>

      {tagline && (
        <div class="inline-flex items-center gap-2 mb-6">
          <div class="w-2 h-2 bg-gradient-to-r from-green-500 to-yellow-500 rounded-full animate-pulse"></div>
          <p
            class="text-sm md:text-base text-green-600 dark:text-green-400 font-bold tracking-widest uppercase"
            set:html={tagline}
          />
          <div class="w-2 h-2 bg-gradient-to-r from-yellow-500 to-red-500 rounded-full animate-pulse"></div>
        </div>
      )}
      
      {title && (
        <h2
          class={twMerge(
            "font-bold leading-tighter tracking-tighter font-heading text-heading text-3xl relative z-10",
            titleClass
          )}
          set:html={title}
        />
      )}

      {subtitle && (
        <div class="relative z-10">
          <p
            class={twMerge("mt-6 text-muted relative", subtitleClass)}
            set:html={subtitle}
          />
          {/* Ligne décorative sous le sous-titre */}
          <div class="mt-6 flex justify-center">
            <div class="w-24 h-1 bg-gradient-to-r from-green-500 via-yellow-500 to-red-500 rounded-full"></div>
          </div>
        </div>
      )}
    </div>
  )
}
